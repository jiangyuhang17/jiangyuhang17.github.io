---
title: 大型游戏服务端读书笔记
date: 2024-06-15 17:00:00
categories: 游戏服务器
description: 百万在线：大型游戏服务端开发 读书笔记
---

## 第一章 引入

### 服务器承载量

从`CPU负载`、`内存占用`、`网络流量`等多个角度考量，也需要考虑不同游戏类型的`逻辑复杂度`。

可以做个假设，在MMORPG中，玩家平均每3秒操作一次（走路，购物），服务器平均处理一条消息花费2毫秒。从CPU角度来看，如果同一时刻只处理一个客户端请求，服务器每秒可以处理500条消息，最高承载1500人。按经验推算，最高1000多人在线的游戏，DAU大概是三五千，这种承载量对于多数独立游戏和小型手游是足够的。

上面是仅计算了CPU负载，实际上"走路"这类`广播消息`受网络影响很大，不同类型游戏对服务器`响应速度`有不同要求。如果不做进一步优化，广播的消息量与在线玩家呈`指数增长`关系，通常这类`单线程程序`只能支持几十名玩家进行广播。

### 强弱交互

* 同一场景角色交互很强，"走路"消息，可以在`同一进程`处理。

* 不同场景角色交互较弱，只有聊天、好友、公会这些功能需要交互，可以将同一个服的玩家放在`一台机器`上处理，进程间通信会比同一进程共享数据慢数百倍。

* 不同服务器的玩家交互很少，可以放到`不同机器`上。

