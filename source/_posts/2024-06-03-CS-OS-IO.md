---
title: 操作系统之网络编程心得
date: 2020-06-03 19:00:47
categories: 操作系统
tags: [操作系统, 网络编程]
description: 
---

操作系统中最慢的部分就是IO
网络 毫秒级~秒级，HDD 毫秒级，SSD 微秒级，内存 纳秒级

## 减少 内存拷贝 上下文切换

一次数据传输，可能涉及多次内存拷贝，内核与用户态间的拷贝带来系统调用，系统调用需要两次上下文切换

* 首先，上下文切换需要 几十纳秒 ~ 几微秒，高并发环境容易被累积放大

* 其次，内存拷贝也会消耗CPU资源

### DMA

CPU搬运数据，是利用寄存器一次一个字节地搬

DMA帮CPU省去在IO设备缓冲区和内核缓冲区之间的数据搬运，但CPU还是要在内核缓冲区和用户缓冲区之间搬运

### 零拷贝

#### mmap + write

